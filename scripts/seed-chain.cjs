const { PrismaClient } = require(
  '../node_modules/.pnpm/@prisma+client@6.19.2_prism_6b2b1af085fe6797f5a5ea830937a8e3/node_modules/@prisma/client'
);

const invited = [
  { day: 0, text: `Добро пожаловать в Social Organizer!\n\nТы только что присоединился к сети взаимоподдержки. Не к пустому аккаунту — а к живой сети людей, которые уже готовы помогать друг другу.\n\nТот, кто тебя пригласил, уже связан с десятками людей. Через него ты связан с ними тоже — до 3 рукопожатий. Их возможности — теперь и твои.\n\nЗайди на дашборд и посмотри "Возможности сети" — это сумма, на которую люди вокруг тебя готовы помочь.` },
  { day: 1, text: `Ты не начинаешь с нуля\n\nЗдесь ты с первого дня подключён к сети того, кто тебя пригласил. Его друзья, их друзья — все в пределах 3 рукопожатий — уже часть твоей сети поддержки.\n\nА теперь представь: ты приглашаешь одного друга. Он тоже мгновенно получает доступ ко всей этой сети. И его приход усиливает возможности для всех — включая тебя.` },
  { day: 2, text: `Простая математика\n\nДопустим, в сети уже 100 человек. Ты приглашаешь 3 друзей. Каждый из них приглашает 3 своих.\n\nСеть выросла на 12 человек. Их бюджеты помощи добавились к общим возможностям. И этими возможностями пользуются все — и ты, и твои друзья, и те 100, что были до вас.\n\nТебе не нужно быть организатором. Одно приглашение — уже вклад.` },
  { day: 3, text: `Бюджет — маленький шаг с большим эффектом\n\nНа дашборде есть "Планируемый бюджет" — сумма, которую ты готов выделять на помощь в месяц. Не платёж, не подписка — просто ориентир.\n\nДаже $5 имеют значение. Если 100 человек установят по $10 — возможности сети = $1000. Это коллективная готовность помочь любому в трудную минуту.\n\nУстанови бюджет на дашборде — возможности сети вырастут для всех.` },
  { day: 4, text: `Как пригласить друга (и почему ему это выгодно)\n\nКогда ты приглашаешь друга — ты не просишь его "строить сеть". Ты даришь ему готовую: все люди, с которыми ты связан, становятся доступны и ему.\n\nКак сказать:\n\n"Я в сети взаимоподдержки — там люди помогают друг другу через цепочки знакомых. Если вступишь через меня — ты сразу подключишься к сети из [число] человек."\n\nТы не продаёшь. Ты делишься реальной ценностью.` },
  { day: 5, text: `4 шага — и ты усилил всех\n\n1. Ты уже зарегистрирован (сделано!)\n2. Установи бюджет — покажи готовность\n3. Пригласи друга — подари ему доступ к сети\n4. Помоги ему сделать шаги 2 и 3\n\nКогда твой друг приглашает кого-то — сеть становится сильнее и для тебя. Каждый усиливает каждого.` },
  { day: 6, text: `Один друг важнее десяти контактов\n\nЧто лучше: пригласить 10 человек, которые забудут — или одного, который установит бюджет и пригласит своего друга?\n\nОдин активный человек запускает цепочку. Потрать 5 минут после приглашения: покажи другу дашборд, помоги установить бюджет. Эти 5 минут усиливают всю сеть.` },
  { day: 7, text: `Когда это по-настоящему спасает\n\nСрочная ситуация. Ты создаёшь сбор — уведомление идёт по цепочкам рукопожатий к людям, которые тебя знают или знают тех, кто тебя знает.\n\nФормула 1:1 — сумма сбора = количество уведомлённых. Деньги не проходят через приложение — люди помогают напрямую.\n\nКаждый приглашённый друг — ещё один человек, готовый откликнуться. Для всех.` },
  { day: 8, text: `Сеть — общая\n\nЗдесь нет "моей сети" и "твоей сети". Есть одна общая, где каждый связан через цепочки доверия. Твой друг не строит что-то отдельное — он усиливает то, что уже есть.\n\nКак костёр: каждое полено греет всех вокруг.` },
  { day: 9, text: `Что дальше\n\nЗа эти дни ты узнал главное:\n- Ты уже часть работающей сети — не с нуля\n- Каждое приглашение усиливает сеть для всех\n- Бюджет — маленький вклад, большой эффект\n- Твои друзья получают готовую сеть, а не пустой аккаунт\n\nПосмотри на дашборд: "Возможности сети" выросли с момента регистрации? Одно приглашение сегодня — и завтра возможности станут больше. Для всех.` },
];

const organic = [
  { day: 0, text: `Добро пожаловать в Social Organizer!\n\nТы нашёл платформу для координации взаимопомощи между людьми, которые друг другу доверяют. Здесь нет анонимных пожертвований — только реальные связи через цепочки знакомых.\n\nСейчас ты — начало своей сети. Это значит, что каждый человек, которого ты пригласишь, получит доступ не к пустому аккаунту, а к сети, которую ты формируешь.\n\nПервый шаг: пригласи человека, которому доверяешь. С одного рукопожатия начинается всё.` },
  { day: 1, text: `Почему первые 5 человек — самые важные\n\nКаждый, кого ты пригласишь, связан с тобой рукопожатием. Но если он пригласит своих друзей — они тоже окажутся в твоей сети (2-е рукопожатие). А их друзья — в 3-м.\n\n5 друзей → каждый приведёт 5 → каждый из тех ещё 5. Итого: 5 + 25 + 125 = 155 человек. И ты сделал всего 5 приглашений.\n\nНачни с одного. Сеть растёт быстрее, чем кажется.` },
  { day: 2, text: `Ты не один — ты первый\n\nБыть первым — значит определять, кто будет в сети. Ты выбираешь людей, которым доверяешь. Они выбирают своих. Так формируется сеть, где каждый за каждого.\n\nИ когда друг спросит "а что мне это даёт?" — ответ простой: он сразу получает доступ ко всем, кого ты уже пригласил. Ему не нужно начинать с нуля — ты это уже сделал за него.` },
  { day: 3, text: `Бюджет — первый кирпичик\n\nНа дашборде есть "Планируемый бюджет" — сумма, которую ты готов выделять на помощь в месяц. Не платёж — просто ориентир.\n\nУстанови даже $5. Когда ты приглашаешь друга — он видит, что возможности сети уже больше нуля. Это мотивирует. Бюджет первого человека в сети — сигнал серьёзности для всех остальных.` },
  { day: 4, text: `Как объяснить идею другу\n\nТы не продаёшь — ты предлагаешь подстраховку:\n\n"Я создаю сеть взаимоподдержки между друзьями. Идея простая: если кому-то из нас понадобится помощь — остальные узнают через приложение и помогут кто чем может. Присоединишься?"\n\nДруг приходит не в пустоту — он приходит к тебе. А если ты уже пригласил кого-то — он приходит в сеть из нескольких человек.` },
  { day: 5, text: `4 шага для каждого\n\n1. Зарегистрируйся (сделано!)\n2. Установи бюджет — даже минимальный\n3. Пригласи одного друга\n4. Помоги ему сделать шаги 2 и 3\n\nКогда каждый новый человек повторяет эти 4 шага — сеть растёт сама. Твоя задача — запустить цепочку. Дальше она работает без тебя.` },
  { day: 6, text: `Глубина важнее ширины\n\nЧто лучше: пригласить 10 человек, которые забудут — или 3, каждый из которых пригласит ещё 3?\n\nПосле приглашения потрать 5 минут: покажи другу дашборд, помоги установить бюджет, объясни как отправить приглашение. Один активный друг ценнее десяти неактивных.` },
  { day: 7, text: `Как работает помощь\n\nКогда кому-то в сети нужна помощь — он создаёт сбор. Уведомление идёт по цепочкам рукопожатий. Формула 1:1: сумма сбора = количество уведомлённых.\n\nДеньги не проходят через приложение — люди договариваются сами. Приложение только координирует.\n\nЧем больше людей в сети — тем быстрее находится помощь. Каждый приглашённый друг — ещё одна точка опоры.` },
  { day: 8, text: `Твоя сеть — это подарок друзьям\n\nКаждый, кого ты приглашаешь, получает доступ ко всем, кого ты уже собрал. Ему не нужно строить с нуля — он входит в готовую сеть.\n\nА когда он приглашает своих друзей — они усиливают сеть для всех, включая тебя. Все выигрывают.` },
  { day: 9, text: `Что дальше\n\nЗа эти дни ты узнал главное:\n- Ты — основа своей сети, и каждый новый человек её усиливает\n- Друзья получают готовую сеть, не пустой аккаунт\n- Бюджет — маленький вклад, большой эффект\n- 4 шага: зарегистрируйся → бюджет → пригласи → помоги повторить\n- Глубина важнее ширины\n\nПосмотри на дашборд. Каждое приглашение увеличивает "Возможности сети" для всех участников. Одно приглашение сегодня — и завтра ваша сеть станет сильнее.` },
];

async function run() {
  // Local DB
  const db = new PrismaClient();
  let count = 0;
  for (const m of invited) {
    await db.autoChainMessage.create({ data: { text: m.text, dayOffset: m.day, sortOrder: 0, intervalMin: 120, variant: 'invited' } });
    count++;
  }
  for (const m of organic) {
    await db.autoChainMessage.create({ data: { text: m.text, dayOffset: m.day, sortOrder: 0, intervalMin: 120, variant: 'organic' } });
    count++;
  }
  console.log('[Local] Created ' + count + ' chain messages');
  await db.$disconnect();

  // Railway DB
  const rdb = new PrismaClient({ datasources: { db: { url: 'postgresql://postgres:VWu9BYoj6MO1KcEsoHuIO8WI@ballast.proxy.rlwy.net:27469/social_organizer' } } });
  count = 0;
  for (const m of invited) {
    await rdb.autoChainMessage.create({ data: { text: m.text, dayOffset: m.day, sortOrder: 0, intervalMin: 120, variant: 'invited' } });
    count++;
  }
  for (const m of organic) {
    await rdb.autoChainMessage.create({ data: { text: m.text, dayOffset: m.day, sortOrder: 0, intervalMin: 120, variant: 'organic' } });
    count++;
  }
  console.log('[Railway] Created ' + count + ' chain messages');
  await rdb.$disconnect();
}

run().catch(console.error);
