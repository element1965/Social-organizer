import { PrismaClient } from '@prisma/client';

const db = new PrismaClient();

const invited = [
  {
    day: 0,
    text: `Добро пожаловать в Social Organizer!

Ты только что присоединился к сети взаимоподдержки. Не к пустому аккаунту — а к живой сети людей, которые уже готовы помогать друг другу.

Тот, кто тебя пригласил, уже связан с десятками людей. Через него ты связан с ними тоже — до 3 рукопожатий. Их возможности — теперь и твои.

Зайди на дашборд и посмотри "Возможности сети" — это сумма, на которую люди вокруг тебя готовы помочь.`,
  },
  {
    day: 1,
    text: `Ты не начинаешь с нуля

Здесь ты с первого дня подключён к сети того, кто тебя пригласил. Его друзья, их друзья — все в пределах 3 рукопожатий — уже часть твоей сети поддержки.

А теперь представь: ты приглашаешь одного друга. Он тоже мгновенно получает доступ ко всей этой сети. И его приход усиливает возможности для всех — включая тебя.`,
  },
  {
    day: 2,
    text: `Простая математика

Допустим, в сети уже 100 человек. Ты приглашаешь 3 друзей. Каждый из них приглашает 3 своих.

Сеть выросла на 12 человек. Их бюджеты помощи добавились к общим возможностям. И этими возможностями пользуются все — и ты, и твои друзья, и те 100, что были до вас.

Тебе не нужно быть организатором. Одно приглашение — уже вклад.`,
  },
  {
    day: 3,
    text: `Бюджет — маленький шаг с большим эффектом

На дашборде есть "Планируемый бюджет" — сумма, которую ты готов выделять на помощь в месяц. Не платёж, не подписка — просто ориентир.

Даже $5 имеют значение. Если 100 человек установят по $10 — возможности сети = $1000. Это коллективная готовность помочь любому в трудную минуту.

Установи бюджет на дашборде — возможности сети вырастут для всех.`,
  },
  {
    day: 4,
    text: `Как пригласить друга (и почему ему это выгодно)

Когда ты приглашаешь друга — ты не просишь его "строить сеть". Ты даришь ему готовую: все люди, с которыми ты связан, становятся доступны и ему.

Как сказать:

"Я в сети взаимоподдержки — там люди помогают друг другу через цепочки знакомых. Если вступишь через меня — ты сразу подключишься к сети из [число] человек."

Ты не продаёшь. Ты делишься реальной ценностью.`,
  },
  {
    day: 5,
    text: `4 шага — и ты усилил всех

1. Ты уже зарегистрирован (сделано!)
2. Установи бюджет — покажи готовность
3. Пригласи друга — подари ему доступ к сети
4. Помоги ему сделать шаги 2 и 3

Когда твой друг приглашает кого-то — сеть становится сильнее и для тебя. Каждый усиливает каждого.`,
  },
  {
    day: 6,
    text: `Один друг важнее десяти контактов

Что лучше: пригласить 10 человек, которые забудут — или одного, который установит бюджет и пригласит своего друга?

Один активный человек запускает цепочку. Потрать 5 минут после приглашения: покажи другу дашборд, помоги установить бюджет. Эти 5 минут усиливают всю сеть.`,
  },
  {
    day: 7,
    text: `Когда это по-настоящему спасает

Срочная ситуация. Ты создаёшь сбор — уведомление идёт по цепочкам рукопожатий к людям, которые тебя знают или знают тех, кто тебя знает.

Формула 1:1 — сумма сбора = количество уведомлённых. Деньги не проходят через приложение — люди помогают напрямую.

Каждый приглашённый друг — ещё один человек, готовый откликнуться. Для всех.`,
  },
  {
    day: 8,
    text: `Сеть — общая

Здесь нет "моей сети" и "твоей сети". Есть одна общая, где каждый связан через цепочки доверия. Твой друг не строит что-то отдельное — он усиливает то, что уже есть.

Как костёр: каждое полено греет всех вокруг.`,
  },
  {
    day: 9,
    text: `Что дальше

За эти дни ты узнал главное:
- Ты уже часть работающей сети — не с нуля
- Каждое приглашение усиливает сеть для всех
- Бюджет — маленький вклад, большой эффект
- Твои друзья получают готовую сеть, а не пустой аккаунт

Посмотри на дашборд: "Возможности сети" выросли с момента регистрации? Одно приглашение сегодня — и завтра возможности станут больше. Для всех.`,
  },
];

const organic = [
  {
    day: 0,
    text: `Добро пожаловать в Social Organizer!

Ты нашёл платформу для координации взаимопомощи между людьми, которые друг другу доверяют. Здесь нет анонимных пожертвований — только реальные связи через цепочки знакомых.

Сейчас ты — начало своей сети. Это значит, что каждый человек, которого ты пригласишь, получит доступ не к пустому аккаунту, а к сети, которую ты формируешь.

Первый шаг: пригласи человека, которому доверяешь. С одного рукопожатия начинается всё.`,
  },
  {
    day: 1,
    text: `Почему первые 5 человек — самые важные

Каждый, кого ты пригласишь, связан с тобой рукопожатием. Но если он пригласит своих друзей — они тоже окажутся в твоей сети (2-е рукопожатие). А их друзья — в 3-м.

5 друзей → каждый приведёт 5 → каждый из тех ещё 5. Итого: 5 + 25 + 125 = 155 человек. И ты сделал всего 5 приглашений.

Начни с одного. Сеть растёт быстрее, чем кажется.`,
  },
  {
    day: 2,
    text: `Ты не один — ты первый

Быть первым — значит определять, кто будет в сети. Ты выбираешь людей, которым доверяешь. Они выбирают своих. Так формируется сеть, где каждый за каждого.

И когда друг спросит "а что мне это даёт?" — ответ простой: он сразу получает доступ ко всем, кого ты уже пригласил. Ему не нужно начинать с нуля — ты это уже сделал за него.`,
  },
  {
    day: 3,
    text: `Бюджет — первый кирпичик

На дашборде есть "Планируемый бюджет" — сумма, которую ты готов выделять на помощь в месяц. Не платёж — просто ориентир.

Установи даже $5. Когда ты приглашаешь друга — он видит, что возможности сети уже больше нуля. Это мотивирует. Бюджет первого человека в сети — сигнал серьёзности для всех остальных.`,
  },
  {
    day: 4,
    text: `Как объяснить идею другу

Ты не продаёшь — ты предлагаешь подстраховку:

"Я создаю сеть взаимоподдержки между друзьями. Идея простая: если кому-то из нас понадобится помощь — остальные узнают через приложение и помогут кто чем может. Присоединишься?"

Друг приходит не в пустоту — он приходит к тебе. А если ты уже пригласил кого-то — он приходит в сеть из нескольких человек.`,
  },
  {
    day: 5,
    text: `4 шага для каждого

1. Зарегистрируйся (сделано!)
2. Установи бюджет — даже минимальный
3. Пригласи одного друга
4. Помоги ему сделать шаги 2 и 3

Когда каждый новый человек повторяет эти 4 шага — сеть растёт сама. Твоя задача — запустить цепочку. Дальше она работает без тебя.`,
  },
  {
    day: 6,
    text: `Глубина важнее ширины

Что лучше: пригласить 10 человек, которые забудут — или 3, каждый из которых пригласит ещё 3?

После приглашения потрать 5 минут: покажи другу дашборд, помоги установить бюджет, объясни как отправить приглашение. Один активный друг ценнее десяти неактивных.`,
  },
  {
    day: 7,
    text: `Как работает помощь

Когда кому-то в сети нужна помощь — он создаёт сбор. Уведомление идёт по цепочкам рукопожатий. Формула 1:1: сумма сбора = количество уведомлённых.

Деньги не проходят через приложение — люди договариваются сами. Приложение только координирует.

Чем больше людей в сети — тем быстрее находится помощь. Каждый приглашённый друг — ещё одна точка опоры.`,
  },
  {
    day: 8,
    text: `Твоя сеть — это подарок друзьям

Каждый, кого ты приглашаешь, получает доступ ко всем, кого ты уже собрал. Ему не нужно строить с нуля — он входит в готовую сеть.

А когда он приглашает своих друзей — они усиливают сеть для всех, включая тебя. Все выигрывают.`,
  },
  {
    day: 9,
    text: `Что дальше

За эти дни ты узнал главное:
- Ты — основа своей сети, и каждый новый человек её усиливает
- Друзья получают готовую сеть, не пустой аккаунт
- Бюджет — маленький вклад, большой эффект
- 4 шага: зарегистрируйся → бюджет → пригласи → помоги повторить
- Глубина важнее ширины

Посмотри на дашборд. Каждое приглашение увеличивает "Возможности сети" для всех участников. Одно приглашение сегодня — и завтра ваша сеть станет сильнее.`,
  },
];

async function main() {
  // Seed both local and Railway
  const urls = [
    process.env.DATABASE_URL, // local
    'postgresql://postgres:VWu9BYoj6MO1KcEsoHuIO8WI@ballast.proxy.rlwy.net:27469/social_organizer',
  ];

  for (const url of urls) {
    const label = url.includes('railway') || url.includes('rlwy') ? 'Railway' : 'Local';
    const client = new PrismaClient({ datasources: { db: { url } } });

    let count = 0;
    for (const m of invited) {
      await client.autoChainMessage.create({
        data: {
          text: m.text,
          dayOffset: m.day,
          sortOrder: 0,
          intervalMin: 120,
          variant: 'invited',
        },
      });
      count++;
    }
    for (const m of organic) {
      await client.autoChainMessage.create({
        data: {
          text: m.text,
          dayOffset: m.day,
          sortOrder: 0,
          intervalMin: 120,
          variant: 'organic',
        },
      });
      count++;
    }
    console.log(`[${label}] Created ${count} chain messages`);
    await client.$disconnect();
  }
}

main().catch(console.error);
